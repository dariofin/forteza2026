"use strict";function _regenerator(){function s(t,a,n,o){var i=a&&a.prototype instanceof d?a:d,r=Object.create(i.prototype);return _regeneratorDefine2(r,"_invoke",function(t,a,n){function r(t,a){for(g=t,b=a,e=0;!_&&h&&!n&&e<C.length;e++){var n,r=C[e],s=p.p,u=r[2];3<t?(n=u===a)&&(b=r[(g=r[4])?5:(g=3,3)],r[4]=r[5]=m):r[0]<=s&&((n=2>t&&s<r[1])?(g=0,p.v=a,p.n=r[1]):s<u&&(n=3>t||r[0]>a||a>u)&&(r[4]=t,r[5]=a,p.n=u,g=0))}if(n||1<t)return v;throw _=!0,a}var s,g,b,h=0,C=n||[],_=!1,p={p:0,n:0,v:m,a:r,f:r.bind(m,4),d:function n(e,t){return s=e,g=0,b=m,p.n=t,v}};return function(n,i,d){if(1<h)throw TypeError("Generator is already running");for(_&&1===i&&r(i,d),g=i,b=d;(e=2>g?m:b)||!_;){s||(g?3>g?(1<g&&(p.n=-1),r(g,b)):p.n=b:p.v=b);try{if(h=2,s){if(g||(n="next"),e=s[n]){if(!(e=e.call(s,b)))throw TypeError("iterator result is not an object");if(!e.done)return e;b=e.value,2>g&&(g=0)}else 1===g&&(e=s.return)&&e.call(s),2>g&&(b=TypeError("The iterator does not provide a '"+n+"' method"),g=1);s=m}else if((e=(_=0>p.n)?b:t.call(a,p))!==v)break}catch(e){s=m,g=1,b=e}finally{h=1}}return{value:e,done:_}}}(t,n,o),!0),r}function d(){}function l(){}function p(){}function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,_regeneratorDefine2(t,n,"GeneratorFunction")),t.prototype=Object.create(a),t}var m,e,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",n=i.toStringTag||"@@toStringTag",v={};e=Object.getPrototypeOf;var o=[][r]?e(e([][r]())):(_regeneratorDefine2(e={},r,function(){return this}),e),a=p.prototype=d.prototype=Object.create(o);return l.prototype=p,_regeneratorDefine2(a,"constructor",p),_regeneratorDefine2(p,"constructor",l),l.displayName="GeneratorFunction",_regeneratorDefine2(p,n,"GeneratorFunction"),_regeneratorDefine2(a),_regeneratorDefine2(a,n,"Generator"),_regeneratorDefine2(a,r,function(){return this}),_regeneratorDefine2(a,"toString",function(){return"[object Generator]"}),(_regenerator=function e(){return{w:s,m:g}})()}function _regeneratorDefine2(o,e,a,n){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}_regeneratorDefine2=function t(i,e,a,n){function r(t,o){_regeneratorDefine2(i,t,function(n){return this._invoke(t,o,n)})}e?s?s(i,e,{value:a,enumerable:!n,configurable:!n,writable:!n}):i[e]=a:(r("next",0),r("throw",1),r("return",2))},_regeneratorDefine2(o,e,a,n)}function asyncGeneratorStep(s,n,t,e,r,o,a){try{var d=s[o](a),i=d.value}catch(e){return void t(e)}d.done?n(i):Promise.resolve(i).then(e,r)}function _asyncToGenerator(i){return function(){var n=this,t=arguments;return new Promise(function(e,r){function o(t){asyncGeneratorStep(d,e,r,o,s,"next",t)}function s(t){asyncGeneratorStep(d,e,r,o,s,"throw",t)}var d=i.apply(n,t);o(void 0)})}}if("undefined"==typeof akeebabackup)var akeebabackup={};"undefined"==typeof akeebabackup.Configuration&&(akeebabackup.Configuration={GUI:{renderOptionLabel:function o(e,t,n){var i,a=0!=(null!==(i=t.nolabel)&&void 0!==i?i:0);if(!(a||"hidden"===t.type||"none"===t.type)){var r=document.createElement("label");r.className="col-sm-3 col-form-label",r.setAttribute("for",e),r.innerHTML=t.title,t.description&&(r.setAttribute("rel","popover"),r.setAttribute("title",t.title),r.setAttribute("data-bs-content",t.description)),t.bold&&(r.className+=" fw-bold"),n.appendChild(r)}},renderOptionTypeNone:function a(e,t,n,o,i){},renderOptionTypeHidden:function a(e,t,n,o,i){var r=document.createElement("input");r.id=e,r.setAttribute("type","hidden"),r.setAttribute("name",e),r.value=t["default"],i.appendChild(r)},renderOptionTypeSeparator:function a(e,t,n,o,i){var r,s,d=null!==(r=t.element)&&void 0!==r?r:"div",l=null!==(s=t.content)&&void 0!==s?s:null,p=document.createElement(d);l&&(p.innerHTML=l),i.appendChild(p)},renderOptionTypeInstaller:function a(e,t,n,o,i){var r=document.createElement("select");for(var s in r.className="form-select akeeba-configuration-select-installer",r.id=e,r.setAttribute("name",e),akeebabackup.Configuration.installers)if(akeebabackup.Configuration.installers.hasOwnProperty(s)){var d=akeebabackup.Configuration.installers[s],l=document.createElement("option");l.value=s,l.innerHTML=d.name,t["default"]===s&&l.setAttribute("selected",1),r.appendChild(l)}n.appendChild(r),o.appendChild(n)},renderOptionTypeEngine:function a(e,t,n,o,i){var r=t.subtype;if(null!=akeebabackup.Configuration.engines[r]){var s=e.substr(4,e.length-5),d=document.createElement("div");d.id=s+"_config",d.className="akeeba-engine-options";var l=document.createElement("select");l.className="form-select",l.id=e,l.setAttribute("name",e);var p=akeebabackup.Configuration.engines[r];for(var u in p)if(p.hasOwnProperty(u)){var c=p[u],g=document.createElement("option");g.value=u,g.innerHTML=c.information.title,t["default"]==u&&g.setAttribute("selected","selected"),l.appendChild(g)}akeebabackup.System.addEventListener(l,"change",function(t){for(var e={},n=[document.getElementById(s+"_config").querySelectorAll("input"),document.getElementById(s+"_config").querySelectorAll("select")],o=null,a=null,p=null,u=0;u<n.length;u++)if(o=n[u],!!o.length)for(y=0;y<o.length;y++)a=o[y],p=a.id,e[p]=a.value,"checkbox"===a.getAttribute("type")||"radio"===a.getAttribute("type")?e[p]=a.checked:"select"===a.getAttribute("type")&&(e[p]=a.options[a.selectedIndex].value);var c=l.value,g=akeebabackup.Configuration.engines[r][c],m=g.information.title,f={};f[m]=g.parameters,akeebabackup.Configuration.parseGuiData(f,d);var v=d.querySelector("div.card-body");for(v instanceof Element&&v.insertAdjacentHTML("afterbegin","<p class=\"alert alert-info\">"+g.information.description+"</p>"),n=[document.getElementById(s+"_config").querySelectorAll("input"),document.getElementById(s+"_config").querySelectorAll("select")],u=0;u<n.length;u++)if(o=n[u],!!o.length)for(var y=0;y<o.length;y++){a=o[y],p=a.id;var b=e[p];null!=b&&("checkbox"===a.getAttribute("type")||"radio"===a.getAttribute("type")?b?a.setAttribute("checked","checked"):a.removeAttribute("checked"):a.value=b,1===u&&akeebabackup.System.triggerEvent(a,"change"))}akeebabackup.Configuration.initialisePopovers(),"undefined"!=typeof g.information.activation_callback&&window[g.information.activation_callback](g.parameters)});var m=document.createElement("button");m.className="btn btn-secondary btn-sm";var f=document.createElement("span");f.className="fa fa-wrench",m.appendChild(f);var v=document.createElement("span");v.innerHTML=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_CONFIG"),m.appendChild(v),akeebabackup.System.addEventListener(m,"click",function(t){t.preventDefault();var e=new bootstrap.Collapse(d);e.toggle()});var y=document.createElement("div");y.className="input-group",y.appendChild(l),n.appendChild(y),n.appendChild(d),o.appendChild(n),akeebabackup.System.triggerEvent(l,"change")}},renderOptionTypeBrowsedir:function a(e,t,n,o,i){var r=document.createElement("input");r.className="form-control",r.setAttribute("type","text"),r.setAttribute("name",e),r.setAttribute("size","30"),r.id=e,r.value=t["default"];var s=document.createElement("button");s.className="btn btn-secondary",s.setAttribute("title",Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_BROWSE"));var d=document.createElement("span");d.className="fa fa-folder-open",s.appendChild(d),akeebabackup.System.addEventListener(s,"click",function(t){return t.preventDefault(),null!=akeebabackup.Configuration.onBrowser&&akeebabackup.Configuration.onBrowser(r.value,r),!1});var l=document.createElement("div");l.className="input-group",l.appendChild(r),l.appendChild(s),n.appendChild(l),o.appendChild(n)},renderOptionTypeEnum:function a(e,t,n,o,i){var r=document.createElement("select");r.className="form-select akeeba-configuration-select-enum",r.id=e,r.setAttribute("name",e);for(var s=t.enumvalues.split("|"),d=t.enumkeys.split("|"),l=0;l<s.length;l++){var p=s[l],u=d[l],c=document.createElement("option");c.value=p,c.innerHTML=u,p===t["default"]&&c.setAttribute("selected","selected"),r.appendChild(c)}"undefined"!=typeof t.onchange&&akeebabackup.System.addEventListener(r,"change",function(){var e=t.onchange;e(r)}),n.appendChild(r),o.appendChild(n)},renderOptionTypeString:function a(e,t,n,o,i){var r=document.createElement("input");r.className="form-control akeeba-configuration-string",r.setAttribute("type","text"),r.id=e,r.setAttribute("name",e),r.value=t["default"],n.appendChild(r),o.appendChild(n)},renderOptionTypePassword:function a(e,t,n,o,i){akeebabackup.Configuration.passwordFields[e]=t["default"];var r=document.createElement("input");r.className="form-control akeeba-configuration-password",r.setAttribute("type","password"),r.id=e,r.setAttribute("name",e),r.setAttribute("size",40),r.value=t["default"],r.setAttribute("autocomplete","off"),n.appendChild(r),o.appendChild(n)},renderOptionTypeInteger:function a(e,t,n,o,i){var r=e.substr(4,e.length-5),s=document.createElement("input");s.id=r,s.setAttribute("name",e),s.setAttribute("type","hidden"),s.value=t["default"];var d=t.min/t.scale,l=t.max/t.scale,p=1/t.scale;1<t.scale?(d=d.toFixed(2),l=l.toFixed(2),p=p.toFixed(2)):(d=Math.trunc(d),l=Math.trunc(l),p=Math.trunc(p));var u=document.createElement("input");u.className="form-control",u.setAttribute("type","number"),u.id=r+"_custom",u.style.display="none",u.setAttribute("min",d),u.setAttribute("max",l),u.setAttribute("step",p),akeebabackup.System.addEventListener(u,"blur",function(){var e=parseFloat(u.value);e*=t.scale,e<t.min?e=t.min:e>t.max&&(e=t.max),s.value=e;var n=e/t.scale;u.value=1<t.scale?n.toFixed(2):Math.trunc(n)});var c=document.createElement("select");c.id=r+"_dropdown",c.setAttribute("name",r+"_dropdown"),c.className="form-select";for(var g=t.shortcuts.split("|"),m=t.scale,f=!1,v=0;v<g.length;v++){var y=g[v],b=y/m,h=document.createElement("option");h.value=y,h.innerHTML=1<m?b.toFixed(2):Math.trunc(b),y==t["default"]&&(h.setAttribute("selected","selected"),f=!0),c.appendChild(h)}var C=document.createElement("option");C.value=-1,C.innerHTML=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_UI_CUSTOM"),f||(C.setAttribute("selected","selected"),u.value=(t["default"]/t.scale).toFixed(2),u.style.display="block"),c.appendChild(C),akeebabackup.System.addEventListener(c,"change",function(){var e=c.value;return"-1"===e?(u.value=(t["default"]/t.scale).toFixed(2),u.style.display="block",void akeebabackup.System.triggerEvent(u,"focus")):void(s.value=e,u.style.display="none")});var _=document.createElement("div");_.className="input-group";var E=t.uom;if(_.appendChild(c),_.appendChild(u),"string"==typeof E&&0!==E.length){var k=document.createElement("span");k.className="input-group-text",k.textContent=E,_.appendChild(k)}n.appendChild(_),n.appendChild(s),o.appendChild(n)},renderOptionTypeBool:function a(e,t,n,o,i){var r=e.match(/[a-z0-9]/ig).join(""),s=document.createElement("div");s.className="btn-group",s.setAttribute("role","group");var d=document.createElement("input");d.type="radio",d.className="btn-check",d.name=e,d.setAttribute("autocomplete","off"),d.id=r+"_1",d.value="1";var l=document.createElement("label");l.className="btn btn-outline-success",l.setAttribute("for",r+"_1"),l.innerText=Joomla.Text._("JYES");var p=document.createElement("input");p.type="radio",p.className="btn-check",p.name=e,p.setAttribute("autocomplete","off"),p.id=r+"_0",p.value=0;var u=document.createElement("label");u.className="btn btn-outline-danger",u.setAttribute("for",r+"_0"),u.innerText=Joomla.Text._("JNO"),0==t["default"]?p.setAttribute("checked","checked"):d.setAttribute("checked","checked"),s.appendChild(d),s.appendChild(l),s.appendChild(p),s.appendChild(u),n.appendChild(s),o.appendChild(n)},renderOptionTypeButton:function a(e,t,n,o,i){var r=o.querySelector("label"),s=t.hook,d=r.innerHTML,l=document.createElement("button");l.id=e,l.innerHTML=d,l.className="btn btn-secondary",r.innerHTML="&nbsp;",akeebabackup.System.addEventListener(l,"click",function(t){t.preventDefault();try{window[s]()}catch(e){}}),n.appendChild(l),o.appendChild(n)},renderOptionTypeUnknown:function a(e,t,n,o,i){var r=e.substr(4,e.length-5),s="akeeba_render_"+t.type,d=window[s];if("function"==typeof d)d(r,t,label,o);else try{window[s](r,t,label,o)}catch(t){}}},engines:{},installers:{},URLs:{},FtpTest:{testConnection:function o(e,t,n){var i=document.getElementById("var["+e+"]");if(akeebabackup.Configuration.FtpTest.buttonKey="var["+e+"]",null===i&&(i=document.getElementById(e),akeebabackup.Configuration.FtpTest.buttonKey=e),null===i)return void console.warn("Button "+akeebabackup.Configuration.FtpTest.buttonKey+" not found");i.setAttribute("disabled","disabled");var a={};try{var r="var["+t+".ftps]",s="var["+t+".passive_mode]";a={isCurl:n?1:0,host:document.getElementById("var["+t+".host]").value,port:document.getElementById("var["+t+".port]").value,user:document.getElementById("var["+t+".user]").value,pass:document.getElementById("var["+t+".pass]").value,initdir:document.getElementById("var["+t+".initial_directory]").value,usessl:document.querySelector("input[name=\""+r+"\"]:checked").value,passive:document.querySelector("input[name=\""+s+"\"]:checked").value,passive_mode_workaround:0}}catch(o){a={isCurl:n?1:0,host:document.getElementById(t+"_host").value,port:document.getElementById(t+"_port").value,user:document.getElementById(t+"_user").value,pass:document.getElementById(t+"_pass").value,initdir:document.getElementById(t+"_initial_directory").value,usessl:document.getElementById(t+"_ftps").checked,passive:document.getElementById(t+"_passive_mode").checked,passive_mode_workaround:0}}if(n)try{a.passive_mode_workaround=document.querySelector("input[name=\"var["+t+".passive_mode_workaround]\"]:checked").value}catch(n){a.passive_mode_workaround=document.getElementById(t+"_passive_mode_workaround").checked}akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.testFtp,akeebabackup.System.doAjax(a,function(e){var t=document.getElementById(akeebabackup.Configuration.FtpTest.buttonKey);t.removeAttribute("disabled");var n=document.getElementById("testFtpDialogBodyOk"),o=document.getElementById("testFtpDialogBodyFail"),i=document.getElementById("testFtpDialogLabel");if(n.style.display="none",o.style.display="none",!0===(null===e||void 0===e?void 0:e.status))i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_OK"),n.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_OK"),n.style.display="block",o.style.display="none";else{var a;i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTFTP_TEST_FAIL"),o.textContent=null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:"???",n.style.display="none",o.style.display="block"}var r=new bootstrap.Modal(document.getElementById("testFtpDialog"),{keyboard:!0,backdrop:!0});r.show()},null,!1,15e3)}},SftpTest:{testConnection:function o(e,t,n){var i=document.getElementById("var["+e+"]");akeebabackup.Configuration.SftpTest.buttonKey="var["+e+"]",i.setAttribute("disabled","disabled");var a={isCurl:n?1:0,host:document.getElementById("var["+t+".host]").value,port:document.getElementById("var["+t+".port]").value,user:document.getElementById("var["+t+".user]").value,pass:document.getElementById("var["+t+".pass]").value,initdir:document.getElementById("var["+t+".initial_directory]").value,privkey:document.getElementById("var["+t+".privkey]").value,pubkey:document.getElementById("var["+t+".pubkey]").value};akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.testSftp,akeebabackup.System.doAjax(a,function(e){var t=document.getElementById(akeebabackup.Configuration.SftpTest.buttonKey);t.removeAttribute("disabled");var n=document.getElementById("testFtpDialogBodyOk"),o=document.getElementById("testFtpDialogBodyFail"),i=document.getElementById("testFtpDialogLabel");if(n.style.display="none",o.style.display="none",!0===(null===e||void 0===e?void 0:e.status))i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_OK"),n.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_OK"),n.style.display="block",o.style.display="none";else{var a;i.textContent=Joomla.Text._("COM_AKEEBABACKUP_CONFIG_DIRECTSFTP_TEST_FAIL"),o.textContent=null!==(a=null===e||void 0===e?void 0:e.status)&&void 0!==a?a:"???",n.style.display="none",o.style.display="block"}var r=new bootstrap.Modal(document.getElementById("testFtpDialog"),{keyboard:!0,backdrop:!0});r.show()},null,!1,15e3)}},FtpModal:null,passwordFields:{},fsBrowser:{params:{dialogId:"folderBrowserDialog",dialogBodyId:"folderBrowserDialogBody"},modalObject:null},parseConfigData:function t(e){akeebabackup.Configuration.engines=e.engines,akeebabackup.Configuration.installers=e.installers,akeebabackup.Configuration.parseGuiData(e.gui)},restoreDefaultPasswords:function e(){for(var t in akeebabackup.Configuration.passwordFields)if(akeebabackup.Configuration.passwordFields.hasOwnProperty(t)){var n=akeebabackup.Configuration.passwordFields[t],o=document.getElementById(t);o&&(o.value="WORKAROUND FOR NAUGHTY BROWSERS",o.value=n)}},onBrowser:function n(e,t){akeebabackup.Configuration.onBrowserCallback=function(e){t.value=e,"object"==typeof akeebabackup.Configuration.fsBrowser.modalObject&&akeebabackup.Configuration.fsBrowser.modalObject.close?akeebabackup.Configuration.fsBrowser.modalObject.close():"object"==typeof akeebabackup.Configuration.fsBrowser.modalObject&&akeebabackup.Configuration.fsBrowser.modalObject.hide&&akeebabackup.Configuration.fsBrowser.modalObject.hide()};var o=akeebabackup.Configuration.URLs.browser+encodeURIComponent(e),i=document.getElementById(akeebabackup.Configuration.fsBrowser.params.dialogBodyId);i.innerHTML="";var a=document.createElement("iframe");a.setAttribute("src",o),a.setAttribute("width","100%"),a.setAttribute("height",400),a.setAttribute("frameborder",0),a.setAttribute("allowtransparency","true"),i.appendChild(a),akeebabackup.Configuration.fsBrowser.modalObject=new bootstrap.Modal(document.getElementById(akeebabackup.Configuration.fsBrowser.params.dialogId),{keyboard:!1,backdrop:"static"}),akeebabackup.Configuration.fsBrowser.modalObject.show()},parseGuiData:function n(e,t){null==t&&(t=document.getElementById("akeebagui")),t.innerHTML="";var o=0;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];if(o++,!!a){var r=document.createElement("div");r.className="card mt-3 rounded-top",t.appendChild(r);var s=document.createElement("h3");s.className="card-header",s.innerHTML=i,s.id="auigrp_"+t.id+"_"+o,r.appendChild(s);var d=document.createElement("div");for(var l in d.className="card-body",r.appendChild(d),a){var p;if(a.hasOwnProperty(l)){var u=a[l],c="var["+l+"]",g=null!==(p=u.showon)&&void 0!==p?p:null,m=document.createElement("div");m.className="row mb-3",m.id="akconfigrow."+l,g&&(m.dataset.showon=JSON.stringify(g)),"hidden"!=u.type&&"none"!=u.type&&d.appendChild(m),akeebabackup.Configuration.GUI.renderOptionLabel(c,u,m);var f=document.createElement("div");f.className="col-sm-9";var v=u.type[0].toUpperCase()+u.type.slice(1),y="renderOptionType"+v;"function"==typeof akeebabackup.Configuration.GUI[y]?akeebabackup.Configuration.GUI[y](c,u,f,m,d):akeebabackup.Configuration.GUI.renderOptionTypeUnknown(c,u,f,m,d)}}}}Joomla.Showon.initialise(t)},onChangeScriptType:function t(e){for(var n,o=e.options[e.selectedIndex].value,a="joomla"===o?"angie":"angie-"+o,r=document.getElementById("var[akeeba.advanced.embedded_installer]"),s=r.children,d=0;d<s.length;d++)if(n=s[d],n.value===a)return void(r.value=a)},initialisePopovers:function e(){var t=Joomla.getOptions("bootstrap.popover");"object"!=typeof t||null===t||Object.keys(t).forEach(function(e){var n=t[e],o={animation:!n.animation||n.animation,container:!!n.container&&n.container,delay:n.delay?n.delay:0,html:!!n.html&&n.html,placement:n.placement?n.placement:"top",selector:!!n.selector&&n.selector,trigger:n.trigger?n.trigger:"click",offset:n.offset?n.offset:0,fallbackPlacement:n.fallbackPlacement?n.fallbackPlacement:"flip",boundary:n.boundary?n.boundary:"scrollParent",customClass:n.customClass?n.customClass:"",sanitize:!n.sanitize||n.sanitize,sanitizeFn:n.sanitizeFn?n.sanitizeFn:null,popperConfig:n.popperConfig?n.popperConfig:null};n.template&&(o.template=n.template),n.allowList&&(o.allowList=n.allowList);var i=Array.from(document.querySelectorAll(e));i.length&&i.map(function(e){new window.bootstrap.Popover(e,o)})})},onFormSubmit:e=>{var t=document.getElementById("adminForm");return!(t&&"undefined"!=typeof window.FormData&&"undefined"!=typeof Object.fromEntries&&"undefined"!=typeof JSON.stringify)||void(e.preventDefault(),akeebabackup.Configuration.submitJsonForm(JSON.stringify(Object.fromEntries(new FormData(t)))))},submitJsonForm:function(){function e(e){return t.apply(this,arguments)}var t=_asyncToGenerator(_regenerator().m(function t(e){var n,o,i,a;return _regenerator().w(function(t){for(;1;)switch(t.p=t.n){case 0:return n=new FormData,n.set("jsonForm",e),n.set(Joomla.getOptions("csrf.token"),1),n.set("task",document.forms.adminForm.task.value),o=null,t.p=1,t.n=2,fetch(document.forms.adminForm.action,{method:"POST",body:n});case 2:if(i=t.v,i.redirected&&(o=i.url),i.ok){t.n=3;break}throw new Error("Error found in network response");case 3:t.n=5;break;case 4:return t.p=4,a=t.v,location.reload(),t.a(2);case 5:if(o){t.n=6;break}return location.reload(),t.a(2);case 6:window.location=o;case 7:return t.a(2)}},t,null,[[1,4]])}));return e}()});function directftp_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.archiver.directftp.ftp_test","engine.archiver.directftp",0)}function postprocftp_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.postproc.ftp.ftp_test","engine.postproc.ftp",0)}function directftpcurl_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.archiver.directftpcurl.ftp_test","engine.archiver.directftpcurl",1)}function postprocftpcurl_test_connection(){akeebabackup.Configuration.FtpTest.testConnection("engine.postproc.ftpcurl.ftp_test","engine.postproc.ftpcurl",1)}function directsftp_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.archiver.directsftp.sftp_test","engine.archiver.directsftp",0)}function postprocsftp_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.postproc.sftp.sftp_test","engine.postproc.sftp",0)}function directsftpcurl_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.archiver.directsftpcurl.sftp_test","engine.archiver.directsftpcurl",1)}function postprocsftpcurl_test_connection(){akeebabackup.Configuration.SftpTest.testConnection("engine.postproc.sftpcurl.sftp_test","engine.postproc.sftpcurl",1)}function akconfig_dropbox_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=dropbox","akeeba_dropbox_window","width=1010,height=500,opener")}function akconfig_dropbox_gettoken(){akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var e={engine:"dropbox",method:"getauth"};akeebabackup.System.doAjax(e,function(e){""==e.error?(document.getElementById("var[engine.postproc.dropbox.token]").value=e.token.oauth_token,document.getElementById("var[engine.postproc.dropbox.token_secret]").value=e.token.oauth_token_secret,document.getElementById("var[engine.postproc.dropbox.uid]").value=e.token.uid,alert("Authentication successful!")):alert("ERROR: Could not complete authentication; please retry")},function(e){alert("ERROR: Could not complete authentication; please retry\n"+e)},!1,15e3)}function akconfig_dropbox2_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=dropbox2","akeeba_dropbox2_window","width=1010,height=500,opener")}function akeeba_dropbox2_oauth_callback(e){document.getElementById("var[engine.postproc.dropbox2.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.dropbox2.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_dropbox2_window");t.close()}function akconfig_onedrive_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedrive","akeeba_onedrive_window","width=1010,height=500,opener")}function akeeba_onedrive_oauth_callback(e){document.getElementById("var[engine.postproc.onedrive.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedrive.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedrive_window");t.close()}function akconfig_onedrivebusiness_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedrivebusiness","akeeba_onedrivebusiness_window","width=1010,height=500,opener")}function akeeba_onedrivebusiness_oauth_callback(e){document.getElementById("var[engine.postproc.onedrivebusiness.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedrivebusiness.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedrivebusiness_window");t.close()}function akeeba_onedrivebusiness_refreshdrives(e){if("onedrivebusiness"===document.getElementById("var[akeeba.advanced.postproc_engine]").value){e=e||{},"undefined"==typeof e["engine.postproc.onedrivebusiness.drive"]&&(e["engine.postproc.onedrivebusiness.drive"]={default:document.getElementById("var[engine.postproc.googledrive.team_drive]").value}),akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var t={engine:"onedrivebusiness",method:"getDrives",params:{"engine.postproc.onedrivebusiness.access_token":document.getElementById("var[engine.postproc.googledrive.access_token]").value,"engine.postproc.onedrivebusiness.refresh_token":document.getElementById("var[engine.postproc.googledrive.refresh_token]").value}};akeebabackup.System.doAjax(t,function(t){var n;if(!(null!==t&&void 0!==t&&null!==(n=t.list)&&void 0!==n&&n.length))return void alert("ERROR: Could not retrieve list of OneDrive Drives.");var o=document.getElementById("var[engine.postproc.onedrivebusiness.drive]");o.innerHTML="",t.list.forEach(t=>{var n=document.createElement("option");n.value=t[0],n.text=t[1],e["engine.postproc.onedrivebusiness.drive"]["default"]===n.value&&(n.selected=!0),o.appendChild(n)})},function(e){alert("ERROR: Could not retrieve list of OneDrive Drives. Error: \n"+e)},!1,15e3)}}function akconfig_onedriveapp_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=onedriveapp","akeeba_onedriveapp_window","width=1010,height=500,opener")}function akeeba_onedriveapp_oauth_callback(e){document.getElementById("var[engine.postproc.onedriveapp.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.onedriveapp.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_onedriveapp_window");t.close()}function akconfig_googledrive_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=googledrive","akeeba_googledrive_window","width=1010,height=500,opener")}function akeeba_googledrive_oauth_callback(e){document.getElementById("var[engine.postproc.googledrive.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.googledrive.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_googledrive_window");t.close(),akeeba_googledrive_refreshdrives()}function akeeba_googledrive_refreshdrives(e){if("googledrive"===document.getElementById("var[akeeba.advanced.postproc_engine]").value){e=e||{},"undefined"==typeof e["engine.postproc.googledrive.team_drive"]&&(e["engine.postproc.googledrive.team_drive"]={default:document.getElementById("var[engine.postproc.googledrive.team_drive]").value}),akeebabackup.System.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi;var t={engine:"googledrive",method:"getDrives",params:{"engine.postproc.googledrive.access_token":document.getElementById("var[engine.postproc.googledrive.access_token]").value,"engine.postproc.googledrive.refresh_token":document.getElementById("var[engine.postproc.googledrive.refresh_token]").value}};akeebabackup.System.doAjax(t,function(t){var n;if(console.log(t),!(null!==t&&void 0!==t&&null!==(n=t.list)&&void 0!==n&&n.length))return void alert("ERROR: Could not retrieve list of Google Drives.");var o=document.getElementById("var[engine.postproc.googledrive.team_drive]");o.innerHTML="",t.list.forEach(t=>{var n=document.createElement("option");n.value=t[0],n.text=t[1],e["engine.postproc.googledrive.team_drive"]["default"]===n.value&&(n.selected=!0),o.appendChild(n)})},function(e){alert("ERROR: Could not retrieve list of Google Drives. Error: \n"+e)},!1,15e3)}}function akconfig_box_openoauth(){var e=akeebabackup.Configuration.URLs.dpeauthopen;e+=-1==e.indexOf("?")?"?":"&",window.open(e+"engine=box","akeeba_box_window","width=1010,height=500,opener")}function akconfig_box_oauth_callback(e){document.getElementById("var[engine.postproc.box.access_token]").value=e.access_token,document.getElementById("var[engine.postproc.box.refresh_token]").value=e.refresh_token;var t=window.open("","akeeba_box_window");t.close()}akeebabackup.System.documentReady(function(){akeebabackup.Configuration.URLs=Joomla.getOptions("akeebabackup.Configuration.URLs",{}),"undefined"!=typeof akeebabackup.Configuration.URLs.dpecustomapi&&(akeebabackup.System.params.AjaxURL=akeebabackup.Configuration.URLs.dpecustomapi);var e=Joomla.getOptions("akeebabackup.Configuration.GUIData",null);null!==e&&setTimeout(function(){setTimeout(akeebabackup.Configuration.restoreDefaultPasswords,1e3),akeebabackup.Configuration.parseConfigData(Joomla.getOptions("akeebabackup.Configuration.GUIData",{})),akeebabackup.Configuration.initialisePopovers(),akeeba_googledrive_refreshdrives(akeebabackup.Configuration.engines.postproc.googledrive.parameters),akeeba_onedrivebusiness_refreshdrives(akeebabackup.Configuration.engines.postproc.onedrivebusiness.parameters);var e=document.getElementById("adminForm");e&&e.addEventListener("submit",akeebabackup.Configuration.onFormSubmit)},10)});
//# sourceMappingURL=Configuration.min.js.map